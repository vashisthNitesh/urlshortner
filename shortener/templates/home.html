{% extends "base.html" %}
{% load static %}

{% block title %}genieURL | Home{% endblock %}

{% block content %}
<section class="hero" id="shorten">
  <div class="container hero-grid">
    <div>
      <!-- Hero messaging focuses on primary value prop and CTA priority. -->
      <span class="pill">Next-gen short links</span>
      <h1 class="hero-title">Make every link magical with branded, trackable, and secure short URLs.</h1>
      <p class="lead">
        genieURL gives you lightning-fast redirects, campaign-ready tracking, and premium insights that look beautiful on every
        device.
      </p>
      <div class="actions">
        <a class="btn btn-primary" href="{% url 'register' %}">Get started free</a>
        <a class="btn btn-soft" href="{% url 'pricing' %}">See pricing</a>
      </div>
      <div class="d-flex flex-wrap gap-2">
        <span class="badge-soft">99.9% uptime SLA</span>
        <span class="badge-soft">GDPR ready</span>
        <span class="badge-soft">Built-in QR codes</span>
      </div>
    </div>
    <div class="hero-card">
      <!-- Inline form keeps the main task front and center for fast conversion. -->
      <h3 class="mb-3">Shorten a link instantly</h3>
      <form method="post" class="row g-3" novalidate>
        {% csrf_token %}
        {% if form.non_field_errors %}
          <div class="col-12">
            <div class="alert alert-danger">{{ form.non_field_errors }}</div>
          </div>
        {% endif %}
        <div class="col-12">
          <label class="form-label" for="id_destination_url">Long URL</label>
          <input
            class="form-control form-control-lg"
            id="id_destination_url"
            name="destination_url"
            type="url"
            placeholder="Paste your long link hereâ€¦"
            value="{{ form.destination_url.value|default_if_none:'' }}"
            required
          />
          {% if form.destination_url.errors %}
            <div class="inline-error">{{ form.destination_url.errors|striptags }}</div>
          {% endif %}
        </div>
        <div class="col-md-6">
          <label class="form-label" for="id_slug">Custom alias (optional)</label>
          <input
            class="form-control"
            id="id_slug"
            name="slug"
            type="text"
            placeholder="e.g. launch-day"
            value="{{ form.slug.value|default_if_none:'' }}"
          />
        </div>
        <div class="col-md-6">
          <label class="form-label" for="id_email">Email for history</label>
          <input
            class="form-control"
            id="id_email"
            name="email"
            type="email"
            placeholder="you@company.com"
            value="{{ form.email.value|default_if_none:'' }}"
            required
          />
        </div>
        <div class="col-12">
          <label class="form-label" for="id_captcha">Quick verification</label>
          <input
            class="form-control"
            id="id_captcha"
            name="captcha"
            type="number"
            placeholder="What is 3 + 4?"
            value="{{ form.captcha.value|default_if_none:'' }}"
            required
          />
          <div class="form-text">We use a lightweight check to keep bots away.</div>
          {% if form.captcha.errors %}
            <div class="inline-error">{{ form.captcha.errors|striptags }}</div>
          {% endif %}
        </div>
        <div class="col-12 d-grid">
          <button class="btn btn-primary btn-lg" type="submit">Shorten URL</button>
        </div>
      </form>
      {% if created_short_url %}
      <div class="notice success mt-3" aria-live="polite">
        <div class="d-flex flex-column gap-2">
          <div class="d-flex align-items-center justify-content-between flex-wrap gap-2">
            <div>
              <strong>Short link ready</strong>
              <p class="mb-0"><a href="{{ created_short_url }}">{{ created_short_url }}</a></p>
            </div>
            <button class="btn btn-outline-primary btn-sm" type="button" data-copy="{{ created_short_url }}">Copy</button>
          </div>
          <div class="d-flex align-items-center gap-3">
            <span class="badge-soft">
              <span aria-hidden="true">ðŸ”’</span>
              Secure redirect
            </span>
            <span class="badge-soft">
              <span aria-hidden="true">ðŸ“Š</span>
              Analytics enabled
            </span>
          </div>
        </div>
      </div>
      <div class="mt-3 d-flex align-items-center gap-3">
        <img class="qr-preview" src="{% static 'images/qr-placeholder.svg' %}" alt="QR code preview" />
        <div>
          <p class="mb-1 fw-semibold">Share instantly</p>
          <p class="text-muted small mb-0">Download QR codes and branded short links on the free plan.</p>
        </div>
      </div>
      {% endif %}
      {% if not user.is_authenticated %}
        <div class="ad-slot mt-3">Ad slot (Google AdSense / sponsor banner)</div>
      {% endif %}
    </div>
  </div>
</section>

<section class="section section-muted">
  <div class="container">
    <!-- Steps are laid out as cards for clarity and scanability. -->
    <div class="section-header mb-4">
      <div>
        <p class="text-uppercase text-muted small mb-2">How it works</p>
        <h2 class="section-title">Paste. Shorten. Track. Repeat.</h2>
      </div>
      <a class="btn btn-outline-primary" href="{% url 'dashboard' %}">Go to dashboard</a>
    </div>
    <div class="step-grid">
      <div class="surface-card">
        <h3>1. Paste your link</h3>
        <p class="text-muted">Drop any long URL and genieURL preps it with smart metadata and safety checks.</p>
      </div>
      <div class="surface-card">
        <h3>2. Shorten & brand</h3>
        <p class="text-muted">Pick a custom alias, add UTM tags, and keep everything aligned with your brand voice.</p>
      </div>
      <div class="surface-card">
        <h3>3. Track results</h3>
        <p class="text-muted">Analyze clicks, devices, and referrers with dashboards tuned for quick decisions.</p>
      </div>
    </div>
  </div>
</section>

<section class="section">
  <div class="container">
    <div class="section-header">
      <div>
        <p class="text-uppercase text-muted small mb-2">Why genieURL</p>
        <h2 class="section-title">Designed for marketers, creators, and growth teams.</h2>
        <p class="lead">Every touchpoint is optimized for speed, clarity, and conversion.</p>
      </div>
      <a class="btn btn-secondary" href="{% url 'pricing' %}">Compare plans</a>
    </div>
    <div class="feature-grid">
      {% for item in highlights %}
      <div class="card-outline">
        <h3 class="h5">{{ item }}</h3>
        <p class="text-muted">Built-in controls make it easy to keep links trusted, on-brand, and measurable.</p>
      </div>
      {% endfor %}
    </div>
  </div>
</section>

<section class="dark">
  <div class="container">
    <div class="section-header">
      <div>
        <p class="eyebrow">Analytics that feel effortless</p>
        <h2>Premium insights without the clutter</h2>
        <p class="text-muted">
          Spot trends instantly with clean visualizations, flexible filters, and export-ready reports.
        </p>
      </div>
      <a class="btn btn-secondary" href="{% url 'pricing' %}">Unlock premium</a>
    </div>
    <div class="grid-two">
      <div class="surface-card">
        <h3>Campaign-ready dashboards</h3>
        <p>See click spikes, geo hotspots, and device splits in one streamlined view.</p>
      </div>
      <div class="surface-card">
        <h3>Privacy-first defaults</h3>
        <p>Bot filtering, hashed IPs, and compliance-friendly export controls built in.</p>
      </div>
    </div>
  </div>
</section>

<section class="section" id="contact">
  <div class="container">
    <!-- Contact block anchors the nav and provides next-step guidance. -->
    <div class="callout d-flex flex-column flex-lg-row align-items-lg-center justify-content-between gap-3">
      <div>
        <h2 class="section-title">Ready to level up your link strategy?</h2>
        <p class="lead mb-0">Talk with our team about migrations, custom domains, or enterprise analytics.</p>
      </div>
      <div class="d-flex flex-wrap gap-2">
        <a class="btn btn-primary" href="mailto:hello@genieurl.com">Contact sales</a>
        <a class="btn btn-outline-primary" href="{% url 'register' %}">Start free trial</a>
      </div>
    </div>
  </div>
</section>
{% endblock %}

{% block extra_scripts %}
<script>
  const copyButtons = document.querySelectorAll('[data-copy]');
  copyButtons.forEach((button) => {
    button.addEventListener('click', () => {
      const value = button.getAttribute('data-copy');
      if (!value) {
        return;
      }
      navigator.clipboard.writeText(value).then(() => {
        button.textContent = 'Copied!';
      });
    });
  });
</script>
{% endblock %}
